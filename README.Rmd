---
title: "teamcolors"
output:
  github_document:
    html_preview: true
---

[![Travis-CI Build Status](https://travis-ci.org/beanumber/teamcolors.svg?branch=master)](https://travis-ci.org/beanumber/teamcolors)

An R package providing color palettes for pro sports teams. The palettes are provided by [Jim Neilsen's Team Colors website](http://jim-nielsen.com/teamcolors/) and offered with only minimal alterations. 

## Install

```{r, eval=FALSE}
devtools::install_github("beanumber/teamcolors")
```

## Load

```{r}
library(teamcolors)
head(teamcolors)
```

## Show palettes

Sometimes you need to work with a named vector of colors. Other times you can use the built-in `scale_color_teams()` and `scale_color_fill()` functions. 

```{r palettes}
league_pal("mlb", 1)
```

## Plot

In baseball, [Pythagorean expectation](https://en.wikipedia.org/wiki/Pythagorean_expectation) relates expected winning percentage to runs allowed and runs scored. How well does it work? 

```{r pythag, message=FALSE}
library(Lahman)
library(tidyverse)
pythag <- Teams %>%
  filter(yearID == 2016) %>%
  select(name, teamID, yearID, W, L, R, RA) %>%
  mutate(wpct = W / (W + L), exp_wpct = 1 / (1 + (RA/R)^2),
         # note name discrepancy!
         name = ifelse(name == "Los Angeles Angels of Anaheim", "Los Angeles Angels", name))
```

### `ggplot2`

```{r ggplot}
ggplot(pythag, aes(x = wpct, y = exp_wpct, color = name, fill = name)) + 
  geom_abline(slope = 1, intercept = 0, linetype = 3) + 
  geom_point(shape = 21, size = 3) + 
  scale_fill_teams(guide = FALSE) + 
  scale_color_teams(2, guide = FALSE) + 
  ggrepel::geom_text_repel(aes(label = teamID)) + 
  scale_x_continuous("Winning Percentage", limits = c(0.3, 0.7)) + 
  scale_y_continuous("Expected Winning Percentage", limits = c(0.3, 0.7)) + 
  theme_light() +
  labs(title = "Real and Pythagorean winning % by team",
       subtitle = paste(first(pull(pythag, yearID)), "MLB Season", sep = " "),
       caption = "Source: the Lahman baseball database. Using teamcolors R pkg") +
  coord_equal()
```

### Base R

```{r base-r, message=FALSE}
pythag <- pythag %>%
  left_join(teamcolors, by = "name")
with(pythag, plot(wpct, exp_wpct, bg = primary, col = secondary, pch = 21, cex = 3))
```


## Key

You can see the color palettes using existing functionality from the [scales](https://github.com/r-lib/scales) package, but it won't show the names of the teams. 

```{r show_col}
scales::show_col(league_pal("mlb"), borders = league_pal("mlb", 2))
```

So, instead, use `show_team_col()`.

```{r teamcolors, fig.height=10, fig.width=10}
show_team_col()
```

## Logos

Links to team logos are provided by (http://www.sportslogos.net/).

```{r logos}
teamcolors %>%
  filter(grepl("New York", name)) %>% 
  pull(logo) %>%
  knitr::include_graphics()
```

## References

For more examples see: 

- Lopez, M.J., Matthews, G.J., Baumer, B.S., "How often does the best team win? A unified approach to understanding randomness in North American sport," *The Annals of Applied Statistics*, vol. 12, no. 4, 2018, pp. 2483--2516. URL (https://projecteuclid.org/euclid.aoas/1542078053)
